@using Our.Umbraco.Ditto
@using Our.Umbraco.PropertyConverters.Utilities
@using TestSite.Logic.Models
@using Umbraco.Web.Models
@inherits UmbracoTemplatePage
@{
    Layout = "umbLayout.cshtml";
    var dittoHomeModel = Model.Content.As<Home>();
    }
@{ Html.RenderPartial("umbHomepageBanner"); }
<!-- Main -->
<div id="main-wrapper">
    <div id="main" class="container">
        <div class="row">
            <div class="12u">
                <h2>Content picker</h2>
                @{
                    var typedContentPicker = Model.Content.GetPropertyValue<IPublishedContent>("contentPicker");
                    if (typedContentPicker != null)
                    {
                        <p>@typedContentPicker.GetType()</p>
                        <p>@typedContentPicker.Name</p>
                    }
                }
                <h2>Content picker ditto</h2>
                @{
                    var dittoContentPicker = dittoHomeModel.ContentPicker;
                    if (dittoContentPicker != null)
                    {
                        <p>@dittoContentPicker.GetType()</p>
                        <p>@dittoContentPicker.Name</p>
                    }
                }

                <h2>Media picker</h2>
                @{
                    var typedMediaPicker = Model.Content.GetPropertyValue<IPublishedContent>("mainImage");
                    if (typedMediaPicker != null)
                    {
                        <p>@typedMediaPicker.GetType()</p>
                        <p>@typedMediaPicker.Url</p>
                    }
                }

                <h2>Media picker ditto</h2>
                @{
                    var dittoMediaPicker = dittoHomeModel.MainImage;
                    if (dittoMediaPicker != null)
                    {
                        <p>@dittoMediaPicker.GetType()</p>
                        <p>@dittoMediaPicker.Url</p>
                    }
                }

                <h2>Multi node tree picker content</h2>
                @{
                    var typedMultiNodeTreePicker = Model.Content.GetPropertyValue<IEnumerable<IPublishedContent>>("featuredNews");

                    <p>@typedMultiNodeTreePicker.GetType()</p>

                    foreach (var item in typedMultiNodeTreePicker)
                    {
                        <p>@item.Name</p>
                    }
                }

                <h2>Multi node tree picker content Ditto</h2>
                @{
                    var dittoMultiNodeTreePicker = dittoHomeModel.FeaturedNews;

                    <p>@dittoMultiNodeTreePicker.GetType()</p>

                    foreach (var item in dittoMultiNodeTreePicker)
                    {
                        <p>@item.Name</p>
                    }
                }

                <h2>Multi node tree picker media</h2>
                @{
                    var typedMultiNodeTreePickerMedia = Model.Content.GetPropertyValue<IEnumerable<IPublishedContent>>("featuredMedia");

                    <p>@typedMultiNodeTreePickerMedia.GetType()</p>

                    foreach (var item in typedMultiNodeTreePickerMedia)
                    {
                        <p>@item.Name</p>
                    }
                }

                <h2>Multi node tree picker media Ditto</h2>
                @{
                    var dittoMultiNodeTreePickerMedia = dittoHomeModel.FeaturedMedia;

                    <p>@dittoMultiNodeTreePickerMedia.GetType()</p>

                    foreach (var item in dittoMultiNodeTreePickerMedia)
                    {
                        <p>@item.Name</p>
                    }
                }

                <h2>Multi node tree picker members</h2>
                @{
                    var typedMultiNodeTreePickerMembers = Model.Content.GetPropertyValue<IEnumerable<IPublishedContent>>("featuredMember");

                    <p>@typedMultiNodeTreePickerMembers.GetType()</p>

                    foreach (var item in typedMultiNodeTreePickerMembers)
                    {
                        <p>@item.GetType()</p>
                        <p>@item.Name</p>
                        <p>@(item.GetPropertyValue<string>("myProperty"))</p>
                    }
                }

                <h2>Multi node tree picker members Ditto</h2>
                @{
                    var dittoMultiNodeTreePickerMembers = dittoHomeModel.FeaturedMember;

                    <p>@dittoMultiNodeTreePickerMembers.GetType()</p>

                    foreach (var item in dittoMultiNodeTreePickerMembers)
                    {
                        <p>@item.GetType()</p>
                        <p>@item.Name</p>
                        <p>@(item.GetPropertyValue<string>("myProperty"))</p>
                    }
                }

                <h2>Multiple Media Picker set to multiple</h2>
                @{
                    var typedMultiMediaPicker = Model.Content.GetPropertyValue<IEnumerable<IPublishedContent>>("multiMedia");
                    foreach (var item in typedMultiMediaPicker)
                    {
                        <img src="@item.Url" style="width:200px" />
                        @item.Name @item.GetType()

                    }
                }

                <h2>Multiple Media Picker set to single</h2>
                @{
                    var typedMediaPickerSingle = Model.Content.GetPropertyValue<IPublishedContent>("multiMediaSingle");
                    if (typedMediaPickerSingle != null)
                    {
                        <img src="@typedMediaPickerSingle.Url" style="width:200px" />
                        @typedMediaPickerSingle.GetType()
                    }
                }

                <h2>Related Links Ditto</h2>
                @{
                    var relatedLinks = dittoHomeModel.RelatedLinks;
                    if (relatedLinks!= null && relatedLinks.Any())
                    {
                        <ul>
                            @foreach (var item in relatedLinks)
                            {
                                var linkTarget = (item.NewWindow) ? "_blank" : null;
                                <li><a href="@item.Link" target="@linkTarget">@item.Caption</a></li>
                            }
                        </ul>
                    }
                }

                <h2>Related Links</h2>
                <pre>
                    @Model.Content.GetProperty("relatedLinks").DataValue
                </pre>
                @{
                    var typedRelatedLinksConverted = Model.Content.GetPropertyValue<RelatedLinks>("relatedLinks");

                    if (typedRelatedLinksConverted != null && typedRelatedLinksConverted.Any())
                    {
                        <ul>
                            @foreach (var item in typedRelatedLinksConverted)
                            {
                                var linkTarget = (item.NewWindow) ? "_blank" : null;

                                var itemId = item.Id != null ? string.Format("(Id: {0}) - ", item.Id) : null;

                                <li>@itemId<a href="@item.Link" target="@linkTarget">@item.Caption</a></li>
                            }
                        </ul>
                    }
                }

                @{ Html.RenderPartial("umbFeatures"); }
            </div>
        </div>
        <div class="row">
            <div class="12u">
                @{   Html.RenderPartial("umbNewsOverviewWidget"); }
            </div>
        </div>
    </div>
</div>
<!-- /Main -->
